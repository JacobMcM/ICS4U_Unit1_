const masterTeamList = [{
    team: "Saint Louis Arch Bishops",
    points: 147,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "USA",
    division: "Western Division",
 },
 {
    team: "Canada Chessbrahs",
    points: 124.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Canada",
    division: "Western Division",
 },
 {
    team: "California Unicorns",
    points: 113,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "USA",
    division: "Western Division",
 },
 {
    team: "New York Marshalls",
    points: 111.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "USA",
    division: "Western Division",
 },
 {
    team: "Chicago Wind",
    points: 79.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "USA",
    division: "Western Division",
 },
 {
    team: "U.K. Lions",
    points: 57.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "UK.",
    division: "Western Division",
 },
 {
    team: "Argentina Krakens",
    points: 48,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Argentina",
    division: "Western Division",
},
{
    team: "Brazil Capybaras",
    points: 45,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Brazil",
    division: "Western Division",
},
{
    team: "Armenia Eagles",
    points: 144,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Arminia",
    division: "Eastern Division",
},
{
    team: "Russia Wizards",
    points: 115.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Russia",
    division: "Eastern Division",
},
{
    team: "India Yogis",
    points: 112,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "India",
    division: "Eastern Division",
},
{
    team: "China Pandas",
    points: 103.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "China",
    division: "Eastern Division",
},
{
    team: "Hungary Hunters",
    points: 84,
    wins: 30,
    loses: 1,
    ties: 1,
    country: "Hungary",
    division: "Eastern Division",
},
{
    team: "Israel Counsellors",
    points: 60.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Isreal",
    division: "Eastern Division",
},
{
    team: "Turkey Knights",
    points: 58.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Turkey",
    division: "Eastern Division",
},
{
    team: "Croatia Bulldogs",
    points: 50,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Croatia",
    division: "Eastern Division",
},
{
    team: "Germany Bears",
    points: 136.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Germany",
    division: "Central Division",
},
{
    team: "France Roosters",
    points: 120.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "France",
    division: "Central Division",
},
{
    team: "Norway Gnomes",
    points: 113.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Norway",
    division: "Central Division",
},
{
    team: "Sweden Wasabis",
    points: 92,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Sweden",
    division: "Central Division",
},
{
    team: "Italy Gladiators",
    points: 84,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Italy",
    division: "Central Division",
},
{
    team: "Poland Hussars",
    points: 76.5,
    wins: 1,
    loses: 10,
    ties: 1,
    country: "Poland",
    division: "Central Division",
},
{
    team: "Netherlands Mosquitoes",
    points: 57.5,
    wins: 1,
    loses: 1,
    ties: 1,
    country: "Netherlands",
    division: "Central Division",
},
{
    team: "Spain Raptors",
    points: 45.5,
    wins: 1,
    loses: 4,
    ties: 1,
    country: "Spain",
    division: "Central Division",
}
];


const masterGameList = [{
    homeTeam: "Saint Louis Arch Bishops",
    awayTeam: "U.K. Lions",
    homePoints: 10,
    awayPoints: 6.5,
    result: "win",
},
{
    homeTeam: "Saint Louis Arch Bishops",
    awayTeam: "Canada Chessbrahs",
    homePoints: 7,
    awayPoints: 9.5,
    result: "loss",
},
{
    homeTeam: "Saint Louis Arch Bishops",
    awayTeam: "India Yogis",
    homePoints: 10,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "Saint Louis Arch Bishops",
    awayTeam: "Italy Gladiators",
    homePoints: 9.5,
    awayPoints: 7,
    result: "win",
},
{
    homeTeam: "Saint Louis Arch Bishops",
    awayTeam: "New York Marshalls",
    homePoints: 6,
    awayPoints: 9,
    result: "loss",
},
{
    homeTeam: "Canada Chessbrahs",
    awayTeam: "Poland Hussars",
    homePoints: 10,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "Canada Chessbrahs",
    awayTeam: "Sweden Wasabis",
    homePoints: 9,
    awayPoints: 0.5,
    result: "win",
},
{
    homeTeam: "Canada Chessbrahs",
    awayTeam: "Norway Gnomes",
    homePoints: 1.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Canada Chessbrahs",
    awayTeam: "France Roosters",
    homePoints: 8,
    awayPoints: 9,
    result: "loss",
},
{
    homeTeam: "California Unicorns",
    awayTeam: "Sweden Wasabis",
    homePoints: 10,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "California Unicorns",
    awayTeam: "New York Marshalls",
    homePoints: 8.5,
    awayPoints: 8.5,
    result: "tie",
},
{
    homeTeam: "California Unicorns",
    awayTeam: "Croatia Bulldogs",
    homePoints: 10,
    awayPoints: 7.5,
    result: "win",
},
{
    homeTeam: "California Unicorns",
    awayTeam: "U.K. Lions",
    homePoints: 9,
    awayPoints: 9,
    result: "tie",
},
{
    homeTeam: "California Unicorns",
    awayTeam: "Chicago Wind",
    homePoints: 10,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "New York Marshalls",
    awayTeam: "France Roosters",
    homePoints: 10,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "New York Marshalls",
    awayTeam: "Turkey Knights",
    homePoints: 6,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "New York Marshalls",
    awayTeam: "Armenia Eagles",
    homePoints: 8,
    awayPoints: 8.5,
    result: "loss",
},
{
    homeTeam: "Chicago Wind",
    awayTeam: "Croatia Bulldogs",
    homePoints: 5.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Chicago Wind",
    awayTeam: "Poland Hussars",
    homePoints: 5.5,
    awayPoints: 8.5,
    result: "loss",
},
{
    homeTeam: "Chicago Wind",
    awayTeam: "Norway Gnomes",
    homePoints: 7,
    awayPoints: 9.5,
    result: "loss",
},
{
    homeTeam: "Chicago Wind",
    awayTeam: "Argentina Krakens",
    homePoints: 7,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "U.K. Lions",
    awayTeam: "Germany Bears",
    homePoints: 8,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "U.K. Lions",
    awayTeam: "Italy Gladiators",
    homePoints: 10,
    awayPoints: 4.5,
    result: "win",
},
{
    homeTeam: "U.K. Lions",
    awayTeam: "Turkey Knights",
    homePoints: 9,
    awayPoints: 9,
    result: "tie",
},
{
    homeTeam: "Argentina Krakens",
    awayTeam: "Netherlands Mosquitoes",
    homePoints: 8,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Argentina Krakens",
    awayTeam: "Poland Hussars",
    homePoints: 0.5,
    awayPoints: 8.5,
    result: "loss",
},
{
    homeTeam: "Argentina Krakens",
    awayTeam: "Turkey Knights",
    homePoints: 8,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Argentina Krakens",
    awayTeam: "Armenia Eagles",
    homePoints: 10,
    awayPoints: 7.5,
    result: "win",
},
{
    homeTeam: "Brazil Capybaras",
    awayTeam: "Italy Gladiators",
    homePoints: 4.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Brazil Capybaras",
    awayTeam: "Sweden Wasabis",
    homePoints: 8.5,
    awayPoints: 6,
    result: "win",
},
{
    homeTeam: "Brazil Capybaras",
    awayTeam: "China Pandas",
    homePoints: 8,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Brazil Capybaras",
    awayTeam: "Croatia Bulldogs",
    homePoints: 6.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Brazil Capybaras",
    awayTeam: "Israel Counsellors",
    homePoints: 10,
    awayPoints: 3,
    result: "win",
},
{
    homeTeam: "Armenia Eagles",
    awayTeam: "Hungary Hunters",
    homePoints: 6,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Armenia Eagles",
    awayTeam: "Turkey Knights",
    homePoints: 5.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Armenia Eagles",
    awayTeam: "Sweden Wasabis",
    homePoints: 3.5,
    awayPoints: 9,
    result: "loss",
},
{
    homeTeam: "Russia Wizards",
    awayTeam: "Israel Counsellors",
    homePoints: 3,
    awayPoints: 8.5,
    result: "loss",
},
{
    homeTeam: "Russia Wizards",
    awayTeam: "Croatia Bulldogs",
    homePoints: 5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Russia Wizards",
    awayTeam: "Netherlands Mosquitoes",
    homePoints: 7.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Russia Wizards",
    awayTeam: "Turkey Knights",
    homePoints: 7,
    awayPoints: 8.5,
    result: "loss",
},
{
    homeTeam: "Russia Wizards",
    awayTeam: "Hungary Hunters",
    homePoints: 3.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "India Yogis",
    awayTeam: "Italy Gladiators",
    homePoints: 6,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "India Yogis",
    awayTeam: "Israel Counsellors",
    homePoints: 8.5,
    awayPoints: 4.5,
    result: "win",
},
{
    homeTeam: "India Yogis",
    awayTeam: "Norway Gnomes",
    homePoints: 10,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "India Yogis",
    awayTeam: "Hungary Hunters",
    homePoints: 10,
    awayPoints: 7,
    result: "win",
},
{
    homeTeam: "China Pandas",
    awayTeam: "Netherlands Mosquitoes",
    homePoints: 8.5,
    awayPoints: 2,
    result: "win",
},
{
    homeTeam: "China Pandas",
    awayTeam: "Spain Raptors",
    homePoints: 10,
    awayPoints: 5.5,
    result: "win",
},
{
    homeTeam: "China Pandas",
    awayTeam: "Norway Gnomes",
    homePoints: 10,
    awayPoints: 7,
    result: "win",
},
{
    homeTeam: "China Pandas",
    awayTeam: "Germany Bears",
    homePoints: 9.5,
    awayPoints: 4.5,
    result: "win",
},
{
    homeTeam: "Hungary Hunters",
    awayTeam: "Poland Hussars",
    homePoints: 7,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Hungary Hunters",
    awayTeam: "Italy Gladiators",
    homePoints: 7.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Israel Counsellors",
    awayTeam: "Spain Raptors",
    homePoints: 7.5,
    awayPoints: 10,
    result: "loss",
},
{
    homeTeam: "Israel Counsellors",
    awayTeam: "Germany Bears",
    homePoints: 8.5,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "Croatia Bulldogs",
    awayTeam: "Germany Bears",
    homePoints: 10,
    awayPoints: 6.5,
    result: "win",
},
{
    homeTeam: "Germany Bears",
    awayTeam: "Spain Raptors",
    homePoints: 6,
    awayPoints: 8.5,
    result: "loss",
},
{
    homeTeam: "France Roosters",
    awayTeam: "Netherland",
    homePoints: 3.5,
    awayPoints: 8.5,
    result: "loss",
},
{
    homeTeam: "France Roosters",
    awayTeam: "Spain Raptors",
    homePoints: 10,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "France Roosters",
    awayTeam: "Poland Hussars",
    homePoints: 8,
    awayPoints: 9,
    result: "loss",
},
{
    homeTeam: "Norway Gnomes",
    awayTeam: "Sweden Wasabis",
    homePoints: 9,
    awayPoints: 8,
    result: "win",
},
{
    homeTeam: "Netherlands Mosquitoes",
    awayTeam: "Spain Raptors",
    homePoints: 10,
    awayPoints: 7,
    result: "win",
},
];

let teams = masterTeamList;
let isCategorySort = false;
let categorySortDir = 'none';

createTable();

//createTable() does not interact with local starage and is still taking info from the masterlist;
/*if (!localStorage.getItem('localList')) {
    populateStorage();
} else {
    createTable();
}*/

//populate the selections in the form
teams.forEach(r => {
    const teamName = r.team;
    const homeTeam = document.querySelector('#homeTeam');
    const awayTeam = document.querySelector('#awayTeam');
    
    const newOption = document.createElement('option');//QUESTION!!!! why do I have to do this?
    const twoOption = document.createElement('option');//make two options so that they dont override each other


    newOption.value = teamName;
    newOption.textContent = teamName;

    twoOption.value = teamName;
    twoOption.textContent = teamName;


    homeTeam.appendChild(newOption);
    awayTeam.appendChild(twoOption);

});



/* LOCAL STORAGE LATER
function populateStorage(){
    localStorage.setItem('localList', teams);
    //localStorage.setItem('localGames', games);

    createTable();
}*/

function createTable() {
    const tbody = document.querySelector('tbody');
    tbody.innerHTML = '';
 
    teams.forEach(r => {
        const row = document.createElement('tr');
        tbody.appendChild(row);
        for (let key in r) {
            const cell = document.createElement('td');
            cell.textContent = r[key];
            row.appendChild(cell);
        }
        
    });
}

function sort (evt){//which columnItem is being changed
    let sortField = evt.currentTarget.id;
    console.log('setting ' + sortField);
    //isCategorySort = true;

    if (categorySortDir !== 'acs'){
        categorySortDir = 'acs';
        teams = masterTeamList.sort((a,b) => {
        return (a[sortField] > b[sortField]) ? 1 : (a[sortField] === b[sortField]) ? 0 : -1});//they are sorting category, need to be fed which to change
        
    } else {
        categorySortDir = 'desc';
        companies = masterTeamList.sort((a,b) => {
        return (a[sortField] < b[sortField]) ? 1 : (a[sortField] === b[sortField]) ? 0 : -1});
    
    }
        
    //populateStorage();
    createTable();
}

function submittedGame (){
    const homeTeam = document.querySelector('#homeTeam').value;
    const awayTeam = document.querySelector('#awayTeam').value;
    const homePoints = document.querySelector('#homePoints').value;
    const awayPoints = document.querySelector('#awayPoints').value;
    //system will crash if no win is selected// perhaps premade selector?
    const result = document.querySelector('input[name$="result"]:checked').value;
    console.log(result);

    

    addGame(homeTeam, awayTeam, parseInt(homePoints), parseInt(awayPoints), result);
    
    //document.getElementById('#homeTeam') = ;
    document.querySelector('#homeTeam').value = '';
    document.querySelector('#awayTeam').value = '';
    document.querySelector('#homePoints').value = 0;
    document.querySelector('#awayPoints').value = 0;
    document.querySelector('input[name$="result"]:checked').value = null;
}

function addGame (homeTeam, awayTeam, homePoints, awayPoints, result){

    //console.log(homeTeam + awayTeam + homePoints + awayPoints + result);

    teams.forEach(team => {
        if (team.team === homeTeam){
            console.log(team);
            team.points += homePoints;
            if (result === 'win'){
                team.wins++;
            }else if (result === 'loss'){
                team.loses++;
            }else{
                team.ties++;
            }
        }
        if (team.team === awayTeam){
            console.log(team);
            team.points += awayPoints;
            if (result === 'win'){
                team.loses++;
            }else if (result === 'loss'){
                team.wins++;
            }else{
                team.ties++;
            }
        }
    })
    createTable();  
}

function yell (stuff){
    console.log(stuff);
}

document.querySelectorAll('th').forEach((th) => th.addEventListener('click', sort));

const submitButton = document.querySelector('#submitGame');

submitButton.addEventListener('click', submittedGame);

const search = document.querySelector('#search');




/*function addRaptor(){
    let team = masterList;
    let Raptors = masterList.fillter(team =>
        isTech = companies.filter(company => company.category === 'Technology')
        console.log(isTech)
    )
}*/

/*const filter = () => {
    let val = search.value;
    companies = masterList.filter(company => 
        company['category'].indexOf(val) >= 0 || copany['name'].indexOf(val)>=0
    );
    createTable();
}*/ //use filter code later

//.search.addEventListener('keyup', filter);

